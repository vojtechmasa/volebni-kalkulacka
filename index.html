<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volebn√≠ kalkulaƒçka ƒåR 2025 - Zjistƒõte, kter√° strana je V√°m nejbl√≠≈æe | 27 ot√°zek</title>
    <meta name="description" content="Nejp≈ôesnƒõj≈°√≠ volebn√≠ kalkulaƒçka pro volby do Parlamentu ƒåR 2025. Odpovƒõzte na 27 ot√°zek s v√°≈æen√Ωmi odpovƒõƒèmi a zjistƒõte, kter√° z 12 kandiduj√≠c√≠ch stran je V√°m nejbl√≠≈æe. Vƒçetnƒõ profil≈Ø stran, anal√Ωzy podle t√©mat a mo≈ænosti sd√≠len√≠ v√Ωsledk≈Ø.">
    <meta name="keywords" content="volebn√≠ kalkulaƒçka 2025, volby do parlamentu ƒåR, politick√© strany, ANO, SPOLU, Pir√°ti, SPD, STAN, Staƒçilo, Motorist√©, P≈ô√≠saha, GEN, Volt, Voluntia, politick√Ω test, volebn√≠ test, ƒçesk√° politika">
    <meta name="author" content="Volebn√≠ kalkulaƒçka ƒåR">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://volebnikalkulacka.org">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://volebnikalkulacka.org">
    <meta property="og:title" content="Volebn√≠ kalkulaƒçka ƒåR 2025 - Zjistƒõte svou politickou shodu">
    <meta property="og:description" content="Nejp≈ôesnƒõj≈°√≠ volebn√≠ kalkulaƒçka s 27 ot√°zkami. Zjistƒõte, kter√° z 12 kandiduj√≠c√≠ch stran je V√°m nejbl√≠≈æe. Vƒçetnƒõ syst√©mu v√°≈æen√≠ ot√°zek a detailn√≠ anal√Ωzy v√Ωsledk≈Ø.">
    <meta property="og:image" content="https://volebnikalkulacka.org/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Volebn√≠ kalkulaƒçka ƒåR 2025">
    <meta property="og:locale" content="cs_CZ">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://volebnikalkulacka.org">
    <meta name="twitter:title" content="Volebn√≠ kalkulaƒçka ƒåR 2025 - Zjistƒõte svou politickou shodu">
    <meta name="twitter:description" content="27 ot√°zek, 12 stran, syst√©m v√°≈æen√≠. Nejp≈ôesnƒõj≈°√≠ volebn√≠ kalkulaƒçka pro volby 2025.">
    <meta name="twitter:image" content="https://volebnikalkulacka.org/twitter-image.jpg">
    <meta name="twitter:creator" content="@volebnikalkulacka">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#1976d2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Volebn√≠ kalkulaƒçka 2025">
    
    <!-- Google AdSense Verification -->
    <meta name="google-adsense-account" content="ca-pub-8023763343426742">
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Volebn√≠ kalkulaƒçka ƒåR 2025",
      "description": "Nejp≈ôesnƒõj≈°√≠ volebn√≠ kalkulaƒçka pro volby do Parlamentu ƒåR 2025 s 27 ot√°zkami a syst√©mem v√°≈æen√≠ odpovƒõƒè√≠",
      "url": "https://volebnikalkulacka.org",
      "applicationCategory": "EducationalApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "CZK"
      },
      "creator": {
        "@type": "Organization",
        "name": "Volebn√≠ kalkulaƒçka ƒåR"
      },
      "keywords": "volebn√≠ kalkulaƒçka, volby 2025, ƒçesk√© politick√© strany, politick√Ω test",
      "inLanguage": "cs",
      "potentialAction": {
        "@type": "UseAction",
        "target": "https://volebnikalkulacka.org"
      }
    }
    </script>
    
    <!-- AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8023763343426742" crossorigin="anonymous"></script>
    
    <!-- Google Analytics - replace GA_MEASUREMENT_ID -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    <style>
        body { font-family: Arial, sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .card { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: #1976d2; margin-bottom: 10px; }
        .question { display: none; }
        .question.active { display: block; }
        .answers { margin: 20px 0; }
        .answer { padding: 15px; margin: 10px 0; background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; cursor: pointer; transition: all 0.3s; }
        .answer:hover { background: #e3f2fd; border-color: #2196f3; }
        .answer.selected { background: #2196f3; color: white; }
        .importance { margin-top: 20px; padding: 15px; background: #fff3e0; border-radius: 8px; border: 1px solid #ffcc02; }
        .importance h4 { margin-bottom: 10px; color: #e65100; font-size: 14px; }
        .importance-options { display: flex; gap: 8px; flex-wrap: wrap; }
        .importance-btn { padding: 8px 12px; border: 2px solid #ffcc02; background: white; border-radius: 20px; cursor: pointer; font-size: 12px; transition: all 0.3s; }
        .importance-btn:hover { background: #fff3e0; }
        .importance-btn.selected { background: #ff9800; border-color: #f57c00; color: white; font-weight: bold; }
        .navigation { display: flex; justify-content: space-between; margin-top: 30px; }
        .btn { padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; }
        .btn-primary { background: #2196f3; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .progress { width: 100%; height: 8px; background: #e0e0e0; border-radius: 4px; margin-bottom: 20px; }
        .progress-bar { height: 100%; background: #4caf50; border-radius: 4px; transition: width 0.3s; }
        .results { display: none; }
        .results.active { display: block; }
        .detailed-results { display: none; }
        .detailed-results.active { display: block; }
        .topic-analysis { display: none; }
        .topic-analysis.active { display: block; }
        .party-profiles { display: none; }
        .party-profiles.active { display: block; }
        .party-result { padding: 15px; margin: 10px 0; background: #f8f9fa; border-radius: 8px; }
        .party-header { display: flex; justify-content: space-between; align-items: center; }
        .party-name { font-weight: bold; }
        .party-score { font-size: 18px; color: #4caf50; font-weight: bold; }
        .party-bar { width: 100%; height: 8px; background: #e0e0e0; border-radius: 4px; margin-top: 8px; overflow: hidden; }
        .party-bar-fill { height: 100%; background: linear-gradient(90deg, #4caf50, #45a049); border-radius: 4px; transition: width 1s ease; }
        .topic-item { background: #fff; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #2196f3; }
        .topic-title { font-weight: bold; color: #1976d2; margin-bottom: 10px; }
        .topic-parties { display: flex; flex-wrap: wrap; gap: 8px; }
        .topic-party { padding: 4px 8px; background: #e3f2fd; border-radius: 12px; font-size: 12px; color: #1565c0; }
        .share-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; }
        .share-buttons { display: flex; gap: 15px; justify-content: center; margin: 15px 0; flex-wrap: wrap; }
        .share-btn { padding: 12px 20px; border: none; border-radius: 25px; color: white; font-weight: 600; cursor: pointer; transition: all 0.3s; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; }
        .share-btn:hover { transform: translateY(-2px); text-decoration: none; color: white; }
        .share-facebook { background: #1877f2; }
        .share-twitter { background: #1da1f2; }
        .share-whatsapp { background: #25d366; }
        .share-email { background: #d44638; }
        .share-copy { background: #6c757d; }
        .nav-buttons { text-align: center; margin: 30px 0; }
        .nav-buttons .btn { margin: 0 10px; }
        .result-summary { background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .result-summary h4 { color: #2e7d32; margin-bottom: 10px; }
        .result-summary p { margin: 5px 0; color: #1b5e20; }
        .ad-banner { text-align: center; padding: 20px; background: #f0f0f0; border-radius: 8px; margin: 20px 0; }
        .top-result { background: #e8f5e8; padding: 20px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        .top-result h3 { color: #2e7d32; margin-bottom: 10px; }
        .top-result .score { font-size: 24px; font-weight: bold; color: #1b5e20; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üó≥Ô∏è Volebn√≠ kalkulaƒçka ƒåR 2025</h1>
            <p>Zjistƒõte, kter√° z kandiduj√≠c√≠ch stran je V√°m nejbl√≠≈æe!</p>
            
            <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-top: 20px; font-size: 14px; border-left: 4px solid #2196f3;">
                <strong>‚ÑπÔ∏è Nez√°vislost:</strong> Tato aplikace nen√≠ sponzorov√°na ≈æ√°dnou politickou stranou a je zcela nez√°visl√°. V√Ωsledky jsou zalo≈æeny na ve≈ôejnƒõ dostupn√Ωch programech stran.
            </div>
        </div>

        <div class="ad-banner">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-8023763343426742"
                 data-ad-slot="1111111111"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>

        <div id="quiz-container" class="card">
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <p>Ot√°zka <span id="current">1</span> z <span id="total">27</span></p>
            
            <div id="questions"></div>

            <div class="navigation">
                <button class="btn btn-secondary" id="prev" onclick="prevQuestion()" disabled>‚Üê P≈ôedchoz√≠</button>
                <button class="btn btn-primary" id="next" onclick="nextQuestion()" disabled>Dal≈°√≠ ‚Üí</button>
            </div>
        </div>

        <div id="results" class="results">
            <div class="card">
                <h2>üéØ Va≈°e v√Ωsledky</h2>
                <div id="results-content"></div>
                <div class="nav-buttons">
                    <button class="btn btn-primary" onclick="showDetailedResults()">üìä Podrobn√© v√Ωsledky v≈°ech stran</button>
                    <button class="btn btn-primary" onclick="restart()">üîÑ Zkusit znovu</button>
                </div>
            </div>
        </div>

        <!-- Detailed Results -->
        <div id="detailed-results" class="detailed-results">
            <div class="card">
                <h2>üìä Podrobn√© v√Ωsledky v≈°ech stran</h2>
                <p style="color: #666; margin-bottom: 20px;">Zde vid√≠te, jak se shodujete se v≈°emi kandiduj√≠c√≠mi stranami vƒçetnƒõ grafick√©ho zn√°zornƒõn√≠.</p>
                <div id="all-parties-results"></div>
                
                <div class="ad-banner">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-8023763343426742"
                         data-ad-slot="2222222222"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                </div>
                
                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="showBasicResults()">‚Üê Zpƒõt na z√°kladn√≠ v√Ωsledky</button>
                    <button class="btn btn-primary" onclick="showTopicAnalysis()">üîç Anal√Ωza podle t√©mat</button>
                </div>
            </div>
        </div>

        <!-- Topic Analysis -->
        <div id="topic-analysis" class="topic-analysis">
            <div class="card">
                <h2>üîç Anal√Ωza podle t√©mat</h2>
                <p style="color: #666; margin-bottom: 20px;">Pod√≠vejte se, ve kter√Ωch oblastech se shodujete s r≈Øzn√Ωmi stranami nejv√≠ce.</p>
                <div id="topic-breakdown"></div>
                
                <div class="ad-banner">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-8023763343426742"
                         data-ad-slot="3333333333"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                </div>
                
                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="showDetailedResults()">‚Üê Zpƒõt na podrobn√© v√Ωsledky</button>
                    <button class="btn btn-primary" onclick="showPartyProfiles()">üèõÔ∏è Profily stran</button>
                </div>
            </div>
        </div>

        <!-- Party Profiles -->
        <div id="party-profiles" class="party-profiles">
            <div class="card">
                <h2>üèõÔ∏è Profily politick√Ωch stran</h2>
                <p style="color: #666; margin-bottom: 20px;">Detailn√≠ informace o kandiduj√≠c√≠ch stran√°ch a jejich programech.</p>
                <div id="profiles-content"></div>
                
                <div class="ad-banner">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-8023763343426742"
                         data-ad-slot="4444444444"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                </div>
                
                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="showTopicAnalysis()">‚Üê Zpƒõt na anal√Ωzu t√©mat</button>
                    <button class="btn btn-primary" onclick="restart()">üîÑ Zkusit znovu</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const parties = {
            'ANO': 'ANO 2011',
            'SPOLU': 'SPOLU (ODS + TOP 09 + KDU-ƒåSL)', 
            'Pir√°ti': 'Pir√°ti + Zelen√≠',
            'SPD': 'SPD + PRO + Trikolora + Svobodn√≠',
            'STAN': 'Starostov√© a nez√°visl√≠',
            'Staƒçilo': 'Staƒçilo! (KSƒåM + ƒåSNS + SD-SN + SOCDEM)',
            'Motorist√©': 'Motorist√© sobƒõ',
            'P≈ô√≠saha': 'P≈ô√≠saha',
            'GEN': 'GEN (Generace, ekonomika, nadƒõje)',
            'Volt': 'Volt ƒåesko',
            'Voluntia': 'Voluntia',
            'Ostatn√≠': 'Ostatn√≠ mal√© strany'
        };

        const questions = [
            {
                text: "Mƒõl by st√°t v√Ωznamnƒõ zv√Ω≈°it minim√°ln√≠ mzdu?",
                parties: { 'Staƒçilo': 5, 'Pir√°ti': 4, 'STAN': 4, 'ANO': 3, 'P≈ô√≠saha': 3, 'Volt': 3, 'SPOLU': 2, 'SPD': 2, 'Motorist√©': 1, 'GEN': 2, 'Voluntia': 1, 'Ostatn√≠': 3 }
            },
            {
                text: "Mƒõla by ƒåesk√° republika vystoupit z Evropsk√© unie?",
                parties: { 'SPD': 5, 'Staƒçilo': 4, 'Motorist√©': 3, 'ANO': 3, 'P≈ô√≠saha': 2, 'GEN': 2, 'Voluntia': 2, 'Ostatn√≠': 2, 'Pir√°ti': 1, 'SPOLU': 1, 'STAN': 1, 'Volt': 1 }
            },
            {
                text: "Mƒõla by b√Ωt legalizov√°na marihuana pro rekreaƒçn√≠ √∫ƒçely?",
                parties: { 'Pir√°ti': 5, 'Voluntia': 5, 'Volt': 4, 'Staƒçilo': 3, 'ANO': 2, 'STAN': 2, 'P≈ô√≠saha': 2, 'GEN': 2, 'Ostatn√≠': 2, 'SPOLU': 1, 'SPD': 1, 'Motorist√©': 1 }
            },
            {
                text: "Mƒõl by st√°t v√≠ce investovat do ve≈ôejn√© dopravy?",
                parties: { 'Staƒçilo': 5, 'Pir√°ti': 4, 'STAN': 4, 'ANO': 4, 'Volt': 4, 'SPOLU': 3, 'P≈ô√≠saha': 3, 'GEN': 3, 'Ostatn√≠': 4, 'SPD': 2, 'Motorist√©': 2, 'Voluntia': 1 }
            },
            {
                text: "Mƒõla by b√Ωt zp≈ô√≠snƒõna opat≈ôen√≠ proti zmƒõnƒõ klimatu?",
                parties: { 'Pir√°ti': 5, 'Volt': 5, 'SPOLU': 4, 'STAN': 4, 'Staƒçilo': 4, 'ANO': 3, 'P≈ô√≠saha': 3, 'GEN': 3, 'Ostatn√≠': 3, 'Voluntia': 2, 'SPD': 1, 'Motorist√©': 1 }
            },
            {
                text: "Mƒõla by b√Ωt omezena migrace do ƒåesk√© republiky?",
                parties: { 'SPD': 5, 'Staƒçilo': 4, 'Motorist√©': 4, 'ANO': 4, 'SPOLU': 3, 'P≈ô√≠saha': 3, 'GEN': 3, 'Ostatn√≠': 3, 'STAN': 2, 'Voluntia': 2, 'Pir√°ti': 1, 'Volt': 1 }
            },
            {
                text: "Mƒõly by b√Ωt sn√≠≈æeny danƒõ pro nejbohat≈°√≠ obƒçany?",
                parties: { 'Voluntia': 5, 'Motorist√©': 5, 'GEN': 4, 'SPOLU': 4, 'ANO': 3, 'STAN': 3, 'P≈ô√≠saha': 3, 'SPD': 2, 'Volt': 2, 'Ostatn√≠': 2, 'Pir√°ti': 2, 'Staƒçilo': 1 }
            },
            {
                text: "Mƒõla by b√Ωt povolena adopce dƒõt√≠ homosexu√°ln√≠mi p√°ry?",
                parties: { 'Pir√°ti': 5, 'Volt': 4, 'Voluntia': 4, 'STAN': 3, 'ANO': 3, 'P≈ô√≠saha': 3, 'GEN': 2, 'Ostatn√≠': 2, 'Staƒçilo': 2, 'SPOLU': 1, 'SPD': 1, 'Motorist√©': 1 }
            },
            {
                text: "Mƒõla by b√Ωt zv√Ω≈°ena kontrola nad soci√°ln√≠mi s√≠tƒõmi?",
                parties: { 'SPOLU': 4, 'Staƒçilo': 4, 'ANO': 4, 'SPD': 4, 'STAN': 3, 'P≈ô√≠saha': 3, 'GEN': 3, 'Ostatn√≠': 3, 'Motorist√©': 2, 'Volt': 2, 'Pir√°ti': 1, 'Voluntia': 1 }
            },
            {
                text: "Mƒõla by ƒåesk√° republika p≈ôijmout euro do roku 2030?",
                parties: { 'Volt': 5, 'SPOLU': 4, 'STAN': 4, 'Pir√°ti': 3, 'ANO': 2, 'GEN': 2, 'P≈ô√≠saha': 2, 'Ostatn√≠': 2, 'Voluntia': 1, 'Motorist√©': 1, 'SPD': 1, 'Staƒçilo': 1 }
            },
            {
                text: "Mƒõla by b√Ωt zavedena 4denn√≠ pracovn√≠ doba?",
                parties: { 'Pir√°ti': 5, 'Staƒçilo': 4, 'Volt': 3, 'ANO': 3, 'STAN': 3, 'P≈ô√≠saha': 2, 'GEN': 2, 'SPOLU': 2, 'Ostatn√≠': 3, 'SPD': 1, 'Motorist√©': 1, 'Voluntia': 2 }
            },
            {
                text: "Mƒõl by b√Ωt zaveden univerz√°ln√≠ z√°kladn√≠ p≈ô√≠jem?",
                parties: { 'Pir√°ti': 5, 'Staƒçilo': 4, 'ANO': 3, 'STAN': 3, 'Volt': 3, 'P≈ô√≠saha': 2, 'GEN': 2, 'Ostatn√≠': 3, 'SPOLU': 1, 'SPD': 1, 'Motorist√©': 1, 'Voluntia': 2 }
            },
            {
                text: "Mƒõla by b√Ωt ukonƒçena vojensk√° podpora Ukrajiny?",
                parties: { 'SPD': 5, 'Staƒçilo': 5, 'Motorist√©': 4, 'ANO': 3, 'P≈ô√≠saha': 3, 'GEN': 2, 'Voluntia': 2, 'Ostatn√≠': 2, 'Volt': 1, 'SPOLU': 1, 'STAN': 1, 'Pir√°ti': 1 }
            },
            {
                text: "Mƒõl by b√Ωt zak√°z√°n prodej benz√≠nov√Ωch a dieselov√Ωch aut od roku 2035?",
                parties: { 'Pir√°ti': 4, 'Volt': 4, 'SPOLU': 3, 'STAN': 3, 'ANO': 2, 'GEN': 2, 'P≈ô√≠saha': 2, 'Staƒçilo': 2, 'Ostatn√≠': 2, 'SPD': 1, 'Motorist√©': 1, 'Voluntia': 1 }
            },
            {
                text: "Mƒõla by b√Ωt povolena eutanazie pro nevyl√©ƒçitelnƒõ nemocn√©?",
                parties: { 'Pir√°ti': 5, 'Volt': 4, 'Voluntia': 4, 'ANO': 3, 'STAN': 3, 'P≈ô√≠saha': 3, 'GEN': 2, 'Staƒçilo': 2, 'SPOLU': 2, 'Ostatn√≠': 3, 'SPD': 1, 'Motorist√©': 1 }
            },
            {
                text: "Mƒõla by b√Ωt zv√Ω≈°ena progresivita da≈àov√©ho syst√©mu?",
                parties: { 'Staƒçilo': 5, 'Pir√°ti': 4, 'Volt': 3, 'ANO': 3, 'STAN': 3, 'P≈ô√≠saha': 3, 'Ostatn√≠': 3, 'SPOLU': 2, 'GEN': 2, 'SPD': 2, 'Motorist√©': 1, 'Voluntia': 1 }
            },
            {
                text: "Mƒõl by b√Ωt omezen poƒçet mand√°t≈Ø jednoho poslance?",
                parties: { 'Pir√°ti': 5, 'P≈ô√≠saha': 5, 'ANO': 4, 'SPD': 4, 'Volt': 3, 'STAN': 3, 'Staƒçilo': 3, 'GEN': 3, 'Voluntia': 3, 'Ostatn√≠': 4, 'SPOLU': 2, 'Motorist√©': 2 }
            },
            {
                text: "Mƒõla by b√Ωt zavedena povinn√° vojensk√° slu≈æba?",
                parties: { 'SPD': 5, 'SPOLU': 4, 'Staƒçilo': 4, 'Motorist√©': 3, 'ANO': 3, 'P≈ô√≠saha': 2, 'GEN': 2, 'Ostatn√≠': 3, 'STAN': 2, 'Voluntia': 1, 'Pir√°ti': 1, 'Volt': 1 }
            },
            {
                text: "Mƒõl by b√Ωt zaveden limit pro v√Ω≈°i politick√Ωch plat≈Ø?",
                parties: { 'SPD': 5, 'Staƒçilo': 5, 'P≈ô√≠saha': 4, 'ANO': 4, 'Pir√°ti': 4, 'Volt': 3, 'STAN': 3, 'GEN': 3, 'Voluntia': 3, 'Ostatn√≠': 4, 'SPOLU': 2, 'Motorist√©': 2 }
            },
            {
                text: "Mƒõla by b√Ωt povolena registrovan√° partnerstv√≠ pro stejnopohlavn√≠ p√°ry?",
                parties: { 'Pir√°ti': 5, 'Volt': 5, 'Voluntia': 4, 'STAN': 4, 'ANO': 3, 'P≈ô√≠saha': 3, 'GEN': 3, 'Ostatn√≠': 3, 'Staƒçilo': 2, 'SPOLU': 2, 'SPD': 1, 'Motorist√©': 1 }
            },
            {
                text: "Mƒõl by b√Ωt zaveden referendum o d≈Øle≈æit√Ωch ot√°zk√°ch?",
                parties: { 'SPD': 5, 'Pir√°ti': 4, 'Staƒçilo': 4, 'P≈ô√≠saha': 4, 'ANO': 3, 'Volt': 3, 'Voluntia': 4, 'GEN': 3, 'Ostatn√≠': 4, 'STAN': 2, 'SPOLU': 2, 'Motorist√©': 3 }
            },
            {
                text: "Mƒõla by b√Ωt zv√Ω≈°ena podpora pro mal√© a st≈ôedn√≠ podnikatele?",
                parties: { 'Motorist√©': 5, 'Voluntia': 5, 'GEN': 5, 'SPOLU': 4, 'ANO': 4, 'STAN': 4, 'P≈ô√≠saha': 3, 'Volt': 3, 'Ostatn√≠': 4, 'Pir√°ti': 3, 'SPD': 3, 'Staƒçilo': 2 }
            },
            {
                text: "Mƒõl by b√Ωt zru≈°en Sen√°t Parlamentu ƒåR?",
                parties: { 'Staƒçilo': 5, 'SPD': 5, 'ANO': 4, 'P≈ô√≠saha': 3, 'Motorist√©': 3, 'GEN': 2, 'STAN': 2, 'Pir√°ti': 2, 'Ostatn√≠': 3, 'Voluntia': 2, 'SPOLU': 1, 'Volt': 1 }
            },
            {
                text: "Mƒõla by b√Ωt zp≈ô√≠snƒõna kontrola m√©di√≠ a jejich vlastnictv√≠?",
                parties: { 'Pir√°ti': 5, 'P≈ô√≠saha': 4, 'Volt': 4, 'Staƒçilo': 3, 'ANO': 3, 'STAN': 3, 'GEN': 3, 'Ostatn√≠': 3, 'SPOLU': 2, 'SPD': 2, 'Motorist√©': 2, 'Voluntia': 1 }
            },
            {
                text: "Mƒõl by b√Ωt zaveden povinn√Ω pod√≠l obnoviteln√Ωch zdroj≈Ø energie?",
                parties: { 'Pir√°ti': 5, 'Volt': 5, 'SPOLU': 4, 'STAN': 4, 'Staƒçilo': 3, 'ANO': 3, 'P≈ô√≠saha': 3, 'GEN': 3, 'Ostatn√≠': 4, 'Voluntia': 2, 'SPD': 1, 'Motorist√©': 1 }
            },
            {
                text: "Mƒõla by b√Ωt omezena pravomoc prezidenta republiky?",
                parties: { 'Pir√°ti': 4, 'Volt': 4, 'SPOLU': 3, 'STAN': 3, 'P≈ô√≠saha': 3, 'GEN': 3, 'Voluntia': 3, 'Ostatn√≠': 3, 'ANO': 2, 'Staƒçilo': 2, 'SPD': 2, 'Motorist√©': 2 }
            },
            {
                text: "Mƒõl by b√Ωt zaveden z√°kaz hazardu ve mƒõstech?",
                parties: { 'SPOLU': 5, 'Pir√°ti': 4, 'STAN': 4, 'Volt': 3, 'ANO': 3, 'P≈ô√≠saha': 3, 'GEN': 3, 'Staƒçilo': 3, 'Ostatn√≠': 4, 'SPD': 2, 'Motorist√©': 2, 'Voluntia': 1 }
            }
        ];

        let currentQuestion = 0;
        let answers = {};
        let importance = {};

        function init() {
            document.getElementById('total').textContent = questions.length;
            showQuestion(0);
        }

        function showQuestion(index) {
            const container = document.getElementById('questions');
            const question = questions[index];
            
            container.innerHTML = `
                <div class="question active">
                    <h3>${question.text}</h3>
                    <div class="answers">
                        <div class="answer" onclick="selectAnswer(5)">Rozhodnƒõ ano</div>
                        <div class="answer" onclick="selectAnswer(4)">Sp√≠≈°e ano</div>
                        <div class="answer" onclick="selectAnswer(3)">Nev√≠m</div>
                        <div class="answer" onclick="selectAnswer(2)">Sp√≠≈°e ne</div>
                        <div class="answer" onclick="selectAnswer(1)">Rozhodnƒõ ne</div>
                    </div>
                    <div class="importance">
                        <h4>üéØ Jak je pro V√°s tato ot√°zka d≈Øle≈æit√°?</h4>
                        <div class="importance-options">
                            <div class="importance-btn" onclick="selectImportance(1)">M√°lo (1√ó)</div>
                            <div class="importance-btn" onclick="selectImportance(2)">St≈ôednƒõ (2√ó)</div>
                            <div class="importance-btn selected" onclick="selectImportance(3)">D≈Øle≈æit√© (3√ó)</div>
                            <div class="importance-btn" onclick="selectImportance(4)">Velmi (4√ó)</div>
                            <div class="importance-btn" onclick="selectImportance(5)">Kriticky (5√ó)</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Restore previous selections
            if (answers[index] !== undefined) {
                const answerElements = container.querySelectorAll('.answer');
                answerElements[5 - answers[index]].classList.add('selected');
            }
            
            if (importance[index] !== undefined) {
                const importanceElements = container.querySelectorAll('.importance-btn');
                importanceElements.forEach(el => el.classList.remove('selected'));
                importanceElements[importance[index] - 1].classList.add('selected');
            } else {
                importance[index] = 3; // Default
            }
            
            document.getElementById('current').textContent = index + 1;
            updateProgress();
            updateButtons();
        }

        function selectAnswer(value) {
            answers[currentQuestion] = value;
            
            document.querySelectorAll('.answer').forEach(a => a.classList.remove('selected'));
            event.target.classList.add('selected');
            
            // Track answer selection
            trackEvent('answer_selected', 'Quiz', `Q${currentQuestion + 1}_${value}`);
            
            updateButtons();
        }

        function selectImportance(weight) {
            importance[currentQuestion] = weight;
            
            document.querySelectorAll('.importance-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                showResults();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        function updateButtons() {
            document.getElementById('prev').disabled = currentQuestion === 0;
            document.getElementById('next').disabled = !answers.hasOwnProperty(currentQuestion);
            
            if (currentQuestion === questions.length - 1) {
                document.getElementById('next').textContent = 'Zobrazit v√Ωsledky';
            } else {
                document.getElementById('next').textContent = 'Dal≈°√≠ ‚Üí';
            }
        }

        function calculateResults() {
            const scores = {};
            
            Object.keys(parties).forEach(party => {
                scores[party] = 0;
            });

            let totalWeight = 0;

            questions.forEach((question, index) => {
                if (answers[index] !== undefined) {
                    const userAnswer = answers[index];
                    const questionWeight = importance[index] || 3;
                    totalWeight += questionWeight;
                    
                    Object.keys(question.parties).forEach(party => {
                        const partyAnswer = question.parties[party];
                        const difference = Math.abs(userAnswer - partyAnswer);
                        const agreement = Math.max(0, 5 - difference);
                        scores[party] += agreement * questionWeight;
                    });
                }
            });

            const maxPossibleScore = totalWeight * 5;
            Object.keys(scores).forEach(party => {
                if (maxPossibleScore > 0) {
                    scores[party] = Math.round((scores[party] / maxPossibleScore) * 100);
                } else {
                    scores[party] = 0;
                }
            });

            return scores;
        }

        function showResults() {
            const scores = calculateResults();
            const sortedResults = Object.entries(scores).sort(([,a], [,b]) => b - a);
            
            // Track quiz completion
            trackEvent('quiz_completed', 'Quiz', `${parties[sortedResults[0][0]]}_${sortedResults[0][1]}%`);
            
            document.getElementById('quiz-container').style.display = 'none';
            hideAllResults();
            document.getElementById('results').classList.add('active');
            
            const content = document.getElementById('results-content');
            content.innerHTML = `
                <div class="top-result">
                    <h3>üéØ Va≈°e nejbli≈æ≈°√≠ shoda</h3>
                    <div class="score">${parties[sortedResults[0][0]]}</div>
                    <div class="score">${sortedResults[0][1]}% shoda</div>
                </div>
                
                <div class="share-section">
                    <h4>üì¢ Sd√≠lejte sv√© v√Ωsledky</h4>
                    <div class="result-summary">
                        <h4>V√°≈° v√Ωsledek:</h4>
                        <p><strong>${parties[sortedResults[0][0]]}</strong> - ${sortedResults[0][1]}% shoda</p>
                        <p>Top 3: ${sortedResults.slice(0,3).map(([party, score]) => `${parties[party]} (${score}%)`).join(', ')}</p>
                    </div>
                    <div class="share-buttons">
                        <button class="share-btn share-facebook" onclick="shareToFacebook()">
                            üìò Facebook
                        </button>
                        <button class="share-btn share-twitter" onclick="shareToTwitter()">
                            üê¶ Twitter
                        </button>
                        <button class="share-btn share-whatsapp" onclick="shareToWhatsApp()">
                            üí¨ WhatsApp
                        </button>
                        <button class="share-btn share-email" onclick="shareViaEmail()">
                            ‚úâÔ∏è Email
                        </button>
                        <button class="share-btn share-copy" id="copy-btn" onclick="copyResultsLink()">
                            üîó Kop√≠rovat odkaz
                        </button>
                    </div>
                </div>
                
                <h4>üìä Top 5 nejbli≈æ≈°√≠ch stran:</h4>
            ` + sortedResults.slice(0, 5).map(([party, score]) => `
                <div class="party-result">
                    <div class="party-header">
                        <div class="party-name">${parties[party]}</div>
                        <div class="party-score">${score}%</div>
                    </div>
                    <div class="party-bar">
                        <div class="party-bar-fill" style="width: ${score}%"></div>
                    </div>
                </div>
            `).join('');
        }

        function showDetailedResults() {
            const scores = calculateResults();
            const sortedResults = Object.entries(scores).sort(([,a], [,b]) => b - a);
            
            hideAllResults();
            document.getElementById('detailed-results').classList.add('active');
            
            const content = document.getElementById('all-parties-results');
            content.innerHTML = sortedResults.map(([party, score]) => `
                <div class="party-result">
                    <div class="party-header">
                        <div class="party-name">${parties[party]}</div>
                        <div class="party-score">${score}%</div>
                    </div>
                    <div class="party-bar">
                        <div class="party-bar-fill" style="width: ${score}%"></div>
                    </div>
                </div>
            `).join('');
        }

        function showTopicAnalysis() {
            hideAllResults();
            document.getElementById('topic-analysis').classList.add('active');
            
            const topics = {
                'Ekonomika': ['Mƒõl by st√°t v√Ωznamnƒõ zv√Ω≈°it minim√°ln√≠ mzdu?', 'Mƒõly by b√Ωt sn√≠≈æeny danƒõ pro nejbohat≈°√≠ obƒçany?', 'Mƒõla by b√Ωt zv√Ω≈°ena progresivita da≈àov√©ho syst√©mu?'],
                'Evropsk√° unie': ['Mƒõla by ƒåesk√° republika vystoupit z Evropsk√© unie?', 'Mƒõla by ƒåesk√° republika p≈ôijmout euro do roku 2030?'],
                'Soci√°ln√≠ politika': ['Mƒõla by b√Ωt zavedena 4denn√≠ pracovn√≠ doba?', 'Mƒõl by b√Ωt zaveden univerz√°ln√≠ z√°kladn√≠ p≈ô√≠jem?'],
                'Ekologie': ['Mƒõla by b√Ωt zp≈ô√≠snƒõna opat≈ôen√≠ proti zmƒõnƒõ klimatu?', 'Mƒõl by b√Ωt zak√°z√°n prodej benz√≠nov√Ωch a dieselov√Ωch aut od roku 2035?'],
                'Lidsk√° pr√°va': ['Mƒõla by b√Ωt povolena adopce dƒõt√≠ homosexu√°ln√≠mi p√°ry?', 'Mƒõla by b√Ωt povolena registrovan√° partnerstv√≠ pro stejnopohlavn√≠ p√°ry?'],
                'Bezpeƒçnost': ['Mƒõla by b√Ωt ukonƒçena vojensk√° podpora Ukrajiny?', 'Mƒõla by b√Ωt omezena migrace do ƒåesk√© republiky?']
            };
            
            const content = document.getElementById('topic-breakdown');
            content.innerHTML = Object.entries(topics).map(([topic, questions]) => `
                <div class="topic-item">
                    <div class="topic-title">${topic}</div>
                    <div class="topic-parties">
                        ${getTopPartiesForTopic(questions).map(party => 
                            `<span class="topic-party">${parties[party]}</span>`
                        ).join('')}
                    </div>
                </div>
            `).join('');
        }

        function showPartyProfiles() {
            hideAllResults();
            document.getElementById('party-profiles').classList.add('active');
            
            const profiles = {
                'ANO': {
                    leader: 'Karel Havl√≠ƒçek a Alena Schillerov√°',
                    description: 'Hnut√≠ ANO 2011 pro≈°lo v roce 2023 reorganizac√≠ veden√≠. Andrej Babi≈° sice z≈Øst√°v√° p≈ôedsedou, ale hlavn√≠mi tv√°≈ôemi strany se stali Karel Havl√≠ƒçek (≈°√©f st√≠nov√© vl√°dy a budouc√≠ premi√©r) a Alena Schillerov√°. Strana se zamƒõ≈ôuje na praktickou politiku bez ideologick√Ωch spor≈Ø, efektivn√≠ spr√°vu st√°tu a podporu obƒçan≈Ø v ka≈ædodenn√≠ch z√°le≈æitostech.',
                    priorities: ['Digitalizace st√°tu a eGovernment', 'Podpora rodin s dƒõtmi', 'Ekonomick√Ω r≈Øst a podpora podnik√°n√≠', 'Rozumn√° energetick√° politika', 'Zlep≈°en√≠ zdravotnictv√≠', 'Pragmatick√° zahraniƒçn√≠ politika']
                },
                'SPOLU': {
                    leader: 'Petr Fiala (ODS), Mark√©ta Pekarov√° Adamov√° (TOP 09), Marek V√Ωborn√Ω (KDU-ƒåSL)',
                    description: 'Koalice t≈ô√≠ st≈ôedoprav√Ωch a pravicov√Ωch stran. ODS, TOP 09 a KDU-ƒåSL tvo≈ô√≠ z√°klad souƒçasn√© vl√°dy a pokraƒçuj√≠ ve spolupr√°ci i do voleb 2025. Zast√°vaj√≠ konzervativn√≠ hodnoty, podporuj√≠ svobodn√Ω trh a silnou pozici ƒåR v NATO a EU.',
                    priorities: ['Svobodn√Ω trh a n√≠zk√© danƒõ', 'Siln√° obrana a NATO', 'Evropsk√° integrace', 'Tradiƒçn√≠ k≈ôes≈•ansk√© hodnoty', 'Vzdƒõl√°n√≠ a vƒõda', 'Boj proti korupci']
                },
                'Pir√°ti': {
                    leader: 'Zdenƒõk H≈ôib (Pir√°ti), Gabriela Sv√°rovsk√° (Zelen√≠)',
                    description: 'ƒåesk√° pir√°tsk√° strana kandiduje s podporou Strany zelen√Ωch. Po odchodu z vl√°dy v z√°≈ô√≠ 2024 a rezignaci Ivana Barto≈°e se nov√Ωm p≈ôedsedou stal Zdenƒõk H≈ôib. Zelen√© vede Gabriela Sv√°rovsk√°.',
                    priorities: ['Digitalizace a eGovernment', 'Transparentnost a open data', 'Ekologie a Green Deal', 'Lidsk√° pr√°va a svobody', 'Legalizace konop√≠', 'Boj proti korupci']
                },
                'SPD': {
                    leader: 'Tomio Okamura',
                    description: '≈†irok√° koalice euroskeptick√Ωch stran. Na kandid√°tce SPD budou i z√°stupci PRO, Trikolory a Svobodn√Ωch. Toto spojen√≠ m√° zabr√°nit propadnut√≠ hlas≈Ø a pos√≠lit euroskeptick√© s√≠ly v parlamentu.',
                    priorities: ['P≈ô√≠m√° demokracie a referenda', 'Vystoupen√≠ z EU', 'Omezen√≠ migrace', 'N√°rodn√≠ suverenita', 'Podpora ƒçesk√Ωch z√°jm≈Ø', 'Kritika Green Dealu']
                },
                'STAN': {
                    leader: 'V√≠t Raku≈°an',
                    description: 'Starostov√© a nez√°visl√≠ kandiduj√≠ samostatnƒõ po rozbit√≠ koalice s Pir√°ty. St≈ôedov√° strana zamƒõ≈ôen√° na region√°ln√≠ rozvoj, komun√°ln√≠ politiku a praktick√© ≈ôe≈°en√≠ probl√©m≈Ø obƒçan≈Ø bez zbyteƒçn√© ideologie.',
                    priorities: ['Region√°ln√≠ rozvoj', 'Komun√°ln√≠ politika', 'Transparentnost', 'Pragmatick√© ≈ôe≈°en√≠ probl√©m≈Ø', 'Podpora mƒõst a obc√≠', 'Kvalitn√≠ ve≈ôejn√© slu≈æby']
                },
                'Staƒçilo': {
                    leader: 'Kate≈ôina Koneƒçn√°',
                    description: 'Levicov√© vlasteneck√© hnut√≠ sdru≈æuj√≠c√≠ KSƒåM, ƒåSNS, SD-SN a SOCDEM. Vzniklo jako reakce na propadnut√≠ levicov√Ωch hlas≈Ø v minul√Ωch volb√°ch. Vede ho europoslankynƒõ Kate≈ôina Koneƒçn√°.',
                    priorities: ['Soci√°ln√≠ spravedlnost', 'Vlastenectv√≠ a n√°rodn√≠ z√°jmy', 'Kritika EU a NATO', 'Podpora pracuj√≠c√≠ch', 'Cenov√° regulace', 'Referendum o EU']
                },
                'Motorist√©': {
                    leader: 'Petr Macinka',
                    description: 'Pravicov√° strana navazuj√≠c√≠ na odkaz V√°clava Klause. Kritizuje Green Deal EU a prosazuje svobodu podnik√°n√≠ s minim√°ln√≠mi st√°tn√≠mi z√°sahy. Kandiduje samostatnƒõ po rozchodu s P≈ô√≠sahou.',
                    priorities: ['Svoboda podnik√°n√≠', 'Kritika Green Dealu', 'N√≠zk√© danƒõ', 'Minim√°ln√≠ st√°tn√≠ z√°sahy', 'Podpora automobilismu', 'Euroskepticismus']
                },
                'P≈ô√≠saha': {
                    leader: 'R√≥bert ≈†lachta',
                    description: 'Strana b√Ωval√©ho ≈°√©fa NCOZ R√≥berta ≈†lachty zamƒõ≈ôen√° na boj proti korupci a modernizaci st√°tn√≠ho apar√°tu. Kandiduje samostatnƒõ po ukonƒçen√≠ spolupr√°ce s Motoristy.',
                    priorities: ['Boj proti korupci', 'Transparentn√≠ justice', 'Efektivn√≠ st√°tn√≠ spr√°va', 'Bezpeƒçnost obƒçan≈Ø', 'Modernizace policie', 'Nez√°vislost justice']
                },
                'GEN': {
                    leader: 'Vojtƒõch Ryvola',
                    description: 'Nov√° pravicov√° strana zalo≈æen√° v roce 2025 b√Ωval√Ωmi ƒçleny ANO a dal≈°√≠mi politiky. C√≠lem je vr√°tit do pop≈ôed√≠ skuteƒçn√© pravicov√© hodnoty a oslovit mladou generaci voliƒç≈Ø.',
                    priorities: ['Pravicov√© ekonomick√© hodnoty', 'Vzdƒõl√°n√≠ a vƒõda', 'Ekonomick√Ω r≈Øst', 'Generaƒçn√≠ zmƒõna v politice', 'Inovace a technologie', 'Podpora podnik√°n√≠']
                },
                'Volt': {
                    leader: 'Vƒõra Jourovov√°',
                    description: 'Proevropsk√° liber√°ln√≠ strana, ƒç√°st celoevropsk√©ho hnut√≠ Volt. Zamƒõ≈ôuje se p≈ôedev≈°√≠m na mlad√© liber√°ln√≠ voliƒçe z mƒõst a prosazuje silnou evropskou integraci.',
                    priorities: ['Evropsk√° federace', 'Digit√°ln√≠ transformace', 'Klimatick√° politika', 'Pr√°va mlad√Ωch lid√≠', 'Vzdƒõl√°n√≠ a v√Ωzkum', 'Liber√°ln√≠ hodnoty']
                },
                'Voluntia': {
                    leader: 'Tom√°≈° Roud',
                    description: 'Libertari√°nsk√° strana vznikl√° v roce 2024 odchodem nƒõkolika ƒçlen≈Ø ze Svobodn√Ωch. Hl√°s√≠ se k libertari√°nsk√© filosofii s d≈Ørazem na dobrovolnost, osobn√≠ svobodu a minim√°ln√≠ st√°t.',
                    priorities: ['Libertari√°nsk√© principy', 'Minim√°ln√≠ st√°t', 'Osobn√≠ svoboda', 'Voln√Ω trh', 'Dobrovolnost ve v≈°em', 'Minimalizace st√°tn√≠ moci']
                },
                'Ostatn√≠': {
                    leader: 'R≈Øzn√≠ l√≠d≈ôi',
                    description: 'Kategorie zahrnuj√≠c√≠ dal≈°√≠ men≈°√≠ politick√© subjekty jako DSZ - Za pr√°va zv√≠≈ôat, SMSka, REFERENDUM, VIZE 2025, JaSaN a dal≈°√≠, kter√© maj√≠ men≈°√≠ ≈°anci na zvolen√≠.',
                    priorities: ['Specifick√© z√°jmy', 'Pr√°va zv√≠≈ôat', 'Referenda', 'M√≠stn√≠ t√©mata', 'Alternativn√≠ p≈ô√≠stupy', 'Nov√© politick√© n√°pady']
                }
            };
            
            const content = document.getElementById('profiles-content');
            content.innerHTML = Object.entries(profiles).map(([key, profile]) => `
                <div class="party-result" style="margin-bottom: 20px;">
                    <h3 style="color: #1976d2; margin-bottom: 10px;">${parties[key]}</h3>
                    <p><strong>L√≠dr:</strong> ${profile.leader}</p>
                    <p style="margin: 10px 0;">${profile.description}</p>
                    <p><strong>Kl√≠ƒçov√© priority:</strong> ${profile.priorities.join(', ')}</p>
                </div>
            `).join('');
        }

        function getTopPartiesForTopic(topicQuestions) {
            const scores = calculateResults();
            const topicScores = {};
            
            // Initialize scores for all parties
            Object.keys(parties).forEach(party => {
                topicScores[party] = 0;
            });
            
            // Calculate scores for this specific topic
            topicQuestions.forEach(questionText => {
                const questionIndex = questions.findIndex(q => q.text === questionText);
                if (questionIndex !== -1 && answers[questionIndex] !== undefined) {
                    const question = questions[questionIndex];
                    const userAnswer = answers[questionIndex];
                    const questionWeight = importance[questionIndex] || 3;
                    
                    Object.keys(question.parties).forEach(party => {
                        const partyAnswer = question.parties[party];
                        const difference = Math.abs(userAnswer - partyAnswer);
                        const agreement = Math.max(0, 5 - difference);
                        topicScores[party] += agreement * questionWeight;
                    });
                }
            });
            
            // Return top 4 parties for this topic
            return Object.entries(topicScores)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 4)
                .map(([party]) => party);
        }

        function showBasicResults() {
            hideAllResults();
            document.getElementById('results').classList.add('active');
        }

        function hideAllResults() {
            document.getElementById('results').classList.remove('active');
            document.getElementById('detailed-results').classList.remove('active');
            document.getElementById('topic-analysis').classList.remove('active');
            document.getElementById('party-profiles').classList.remove('active');
        }

        // Sharing functions
        function getResultsSummary() {
            const scores = calculateResults();
            const sortedResults = Object.entries(scores).sort(([,a], [,b]) => b - a);
            const topParty = sortedResults[0];
            
            return {
                topParty: parties[topParty[0]],
                topScore: topParty[1],
                top3: sortedResults.slice(0, 3).map(([party, score]) => `${parties[party]} (${score}%)`),
                url: window.location.href.split('?')[0] // Clean URL without parameters
            };
        }

        function shareToFacebook() {
            const summary = getResultsSummary();
            const text = `Zjistil(a) jsem svou politickou shodu pomoc√≠ Volebn√≠ kalkulaƒçky ƒåR 2025! M√° nejbli≈æ≈°√≠ strana: ${summary.topParty} s ${summary.topScore}% shodou.`;
            
            trackEvent('share', 'Social', 'Facebook');
            
            const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(summary.url)}&quote=${encodeURIComponent(text)}`;
            window.open(facebookUrl, '_blank', 'width=600,height=400');
        }

        function shareToTwitter() {
            const summary = getResultsSummary();
            const text = `üó≥Ô∏è Volebn√≠ kalkulaƒçka ƒåR 2025: M√° nejbli≈æ≈°√≠ shoda je s ${summary.topParty} (${summary.topScore}%)! 
            
Top 3: ${summary.top3.join(', ')}

Zjistƒõte svou politickou shodu tak√©:`;
            
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(summary.url)}`;
            window.open(twitterUrl, '_blank', 'width=600,height=400');
        }

        function shareToWhatsApp() {
            const summary = getResultsSummary();
            const text = `üó≥Ô∏è Volebn√≠ kalkulaƒçka ƒåR 2025

M√° nejbli≈æ≈°√≠ politick√° shoda:
${summary.topParty} - ${summary.topScore}%

Top 3 strany:
${summary.top3.join('\n')}

Zkus si tak√©: ${summary.url}`;
            
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text)}`;
            window.open(whatsappUrl, '_blank');
        }

        function shareViaEmail() {
            const summary = getResultsSummary();
            const subject = 'Moje v√Ωsledky z Volebn√≠ kalkulaƒçky ƒåR 2025';
            const body = `Ahoj!

Pr√°vƒõ jsem si vyzkou≈°el(a) Volebn√≠ kalkulaƒçku ƒåR 2025 a zjistil(a) svou politickou shodu.

Moje v√Ωsledky:
üéØ Nejbli≈æ≈°√≠ shoda: ${summary.topParty} (${summary.topScore}%)

Top 3 strany:
${summary.top3.join('\n')}

Vyzkou≈°ej si to tak√©: ${summary.url}

Volebn√≠ kalkulaƒçka obsahuje 27 ot√°zek a uk√°≈æe ti, kter√° z kandiduj√≠c√≠ch stran je ti nejbl√≠≈æe!`;
            
            const emailUrl = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = emailUrl;
        }

        function copyResultsLink() {
            const summary = getResultsSummary();
            const copyBtn = document.getElementById('copy-btn');
            
            // Create detailed text for clipboard
            const textToCopy = `üó≥Ô∏è Volebn√≠ kalkulaƒçka ƒåR 2025

M√° nejbli≈æ≈°√≠ politick√° shoda: ${summary.topParty} (${summary.topScore}%)

Top 3: ${summary.top3.join(', ')}

Zjisti svou shodu tak√©: ${summary.url}`;
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                // Modern clipboard API
                navigator.clipboard.writeText(textToCopy).then(() => {
                    copyBtn.textContent = '‚úÖ Zkop√≠rov√°no!';
                    copyBtn.classList.add('copy-success');
                    setTimeout(() => {
                        copyBtn.textContent = 'üîó Kop√≠rovat odkaz';
                        copyBtn.classList.remove('copy-success');
                    }, 2000);
                }).catch(() => {
                    fallbackCopyText(textToCopy);
                });
            } else {
                fallbackCopyText(textToCopy);
            }
        }

        function fallbackCopyText(text) {
            // Fallback for older browsers
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            textArea.setSelectionRange(0, 99999);
            
            try {
                document.execCommand('copy');
                const copyBtn = document.getElementById('copy-btn');
                copyBtn.textContent = '‚úÖ Zkop√≠rov√°no!';
                copyBtn.classList.add('copy-success');
                setTimeout(() => {
                    copyBtn.textContent = 'üîó Kop√≠rovat odkaz';
                    copyBtn.classList.remove('copy-success');
                }, 2000);
            } catch (err) {
                alert('Kop√≠rov√°n√≠ se nepoda≈ôilo. Zkop√≠rujte si odkaz ruƒçnƒõ: ' + window.location.href);
            }
            
            document.body.removeChild(textArea);
        }

        function restart() {
            currentQuestion = 0;
            answers = {};
            importance = {};
            document.getElementById('quiz-container').style.display = 'block';
            hideAllResults();
            showQuestion(0);
        }

        // Initialize AdSense ads
        function initializeAds() {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                (adsbygoogle = window.adsbygoogle || []).push({});
                (adsbygoogle = window.adsbygoogle || []).push({});
                (adsbygoogle = window.adsbygoogle || []).push({});
            } catch (e) {
                console.log('AdSense not loaded yet');
            }
        }

        // Track events for analytics
        function trackEvent(action, category = 'Quiz', label = '') {
            if (typeof gtag !== 'undefined') {
                gtag('event', action, {
                    event_category: category,
                    event_label: label
                });
            }
        }

        // Initialize
        init();
        
        // Initialize ads when page loads
        window.addEventListener('load', () => {
            setTimeout(initializeAds, 1000);
        });
    </script>
</body>
</html>